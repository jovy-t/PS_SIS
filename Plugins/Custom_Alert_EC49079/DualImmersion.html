~[tlist_sql;
SELECT 
    stu.id,
    prog.PROGRAMCODE,
    NVL(TO_CHAR(prog.ENDDATE, 'MM/DD/YYYY'), 'Currently Active'),
    TO_CHAR(prog.STARTDATE, 'MM/DD/YYYY')
FROM ~[wc:aet_customalerts_students] stu
JOIN S_CA_STU_CALPADSPROGRAMS_C prog ON stu.dcid = prog.STUDENTSDCID
WHERE prog.PROGRAMCODE = '301'
AND prog.ID = (
    SELECT MAX(p2.ID) 
    FROM S_CA_STU_CALPADSPROGRAMS_C p2 
    WHERE p2.STUDENTSDCID = stu.dcid 
    AND p2.PROGRAMCODE = '301'
)
;]
"~(id)":"<h3>Dual Immersion Program Status</h3><p><strong>LIP Code:</strong> ~(code)</p><p><strong>Status:</strong> <span style='color:blue; font-weight:bold;'>~(status)</span></p><p><strong>Start Date:</strong> ~(start)</p><hr><p style='font-size:11px; color:#666;'><i>Note: If the Status displays a date, the program is no longer active for this student.</i></p>",
[/tlist_sql]